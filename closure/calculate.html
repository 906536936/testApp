<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>计算几个数的阶层的和，利用闭包</title>
		<script type="text/javascript">
			var calculate = ((function(){

				//缓存数据
				var cache = {};

				// 专门用于计算的方法
				var cal = function(num){

					if (num <= 0 ) {
						return 0;
					} else if( num === 1 ) {
						return 1;
					}

					if (num + "" in cache) {
						return cache[num+""];
					}else{
						return num * arguments.callee.call(null,num - 1);
					}

				}


				return {
					sum : function(){
						var args = Array.prototype.slice.apply(arguments),
							ret  = 0;

						for (var i = args.length - 1; i >= 0; i--) {
							ret += cal.call(null,args[i])
						};

						return ret ;

					},
					product: function(){
						var args = Array.prototype.slice.apply(arguments),
							ret  = 1;

						for (var i = args.length - 1; i >= 0; i--) {
							ret *= cal.call(null,args[i])
						};

						return ret ;	
					}
				};

			})());

			console.log(calculate.sum(2,3,4,5));
			console.log(calculate.product(2,3,4,5));
		</script>
	</head>
	<body>
		
	</body>
</html>